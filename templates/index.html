<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Verb drawing game</title>
  <link rel="icon" type="image/png" href="/static/icons/favicon.png">


  <!-- PWA Meta Tags -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="theme-color" content="#0073ff">

  <!-- Icons -->
  <link rel="apple-touch-icon" href="/static/icons/icon-192.png">
  <link rel="icon" sizes="192x192" href="/static/icons/icon-192.png">
  <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">


  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <link rel="stylesheet" href="/static/css/index.css">
</head>

<body class="menu-body">

  <!-- MAIN MENU -->
  <div class="menu-container">
    <h1>ðŸ“šðŸŽ°Verbs Drawing Game</h1>

    <button onclick="window.location.href='{{ url_for('roleta') }}'">Start Game</button>
    <button onclick="window.location.href='{{ url_for('about') }}'">About</button>
    <button onclick="exitApp()" data-key="exit">Close game</button>
  </div>

  <script>
    /**
     * exitApp()
     * Safely closes the game depending on the platform:
     * - PWA installed â†’ closes the app
     * - Mobile browser â†’ tries to close the tab
     * - Desktop browser â†’ tries to close the tab
     */
    function exitApp() {

      // âœ” If running as a PWA app
      if (window.matchMedia("(display-mode: standalone)").matches) {
          // iOS, Android, Desktop PWA
          console.log("Closing PWA...");
          window.close();
          return;
      }

      // âœ” Normal browser fallback
      console.log("Trying to close browser tab...");
      window.open('', '_self');  // required for some browsers
      window.close();

      // If window did not close (Chrome blocks sometimes)
      alert("Cannot close automatically.\nPlease close the tab manually.");
    }
  </script>

  <script>
    // Register the Service Worker
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("/static/service-worker.js")
        .then(() => console.log("Service Worker Registered!"))
        .catch(err => console.log("Service Worker failed:", err));
    }
  </script>
  
</body>
</html>
